I" '<p>In finance, Value at Risk (VaR) is a crucial metric for assessing the risk of an investment portfolio. VaR provides an estimate of rare but potential loss an investment may face over a specific time horizon and confidence level. To calculate VaR, it’s necessary to have an understanding of the underlying distribution of investment returns.</p>

<p>To accurately determine this distribution, various models from time series analysis can be used. The GARCH model, in particular, is known for its effectiveness in analyzing financial data. One of the main reasons to choose GARCH over other models, such as empirical distribution (actually it is even model-free), random walk, or ARIMA, is that it can capture the volatility dynamics of the stock return, which is essential for accurate VaR calculation of financial asset return.</p>

<h2 id="prices-simple-returns-log-returns">Prices, simple returns, log returns</h2>
<p>Whose distribution exactly do we want to figure out for VaR calculation?  Long story short, we identify the distribution of log returns of McDonald’s stock due to the desirable characteristics of log returns for statistical analysis purpose.</p>

<p>The terms “prices”, “simple returns” and “log returns” refer to different ways of measuring the performance of an investment over time. Price is the most common form of financial asset data we can encounter and the other two are transformed version of this. Let $P_{t}$, $R_{t}$ and $r_{t}$ respectively denote the price, one-period simple return and one-period log return of McDonald’s stock at time $t$. Then $R_{t}$ and $r_{t}$ are defined as</p>

<p>$R_{t}=\dfrac{P_{t}-P_{t-1}}{P_{t-1}}\tag{1}$</p>

<p>$r_{t}=log \left(\dfrac{P_{t}}{P_{t-1}}\right)=log(1+R_{t})\tag{2}$</p>

<p>The log return is frequently referred to as the continuously compounded return on account of the following mathematical principle.</p>

\[\begin{align}
&amp; e^{r_{t}}=\dfrac{P_{t}}{P_{t-1}}\\
&amp; P_{t}=P_{t-1}e^{r_{t}}
\end{align} \tag{3}\]

<p>Both  $R_{t}$ and $r_t$ are measure of the relative movements of price, which is a useful property for comparison of performance between assets. Another technical reason we might be more interested in simple return and log return than raw price is that they could be used as a remedy for non-stationarity of price time-series (differencing).</p>

<div class="figure">
    <img src="/image/VaR/McDonald's price, return and log return.png" style="width: 100%; display: block; margin: 0 auto;" />
    <div class="caption">
        <span class="caption-label">Figure 1.</span> Closing prices (top), simple returns (middle) and log returns (bottom) of McDonald's stock for past five years.
    </div>
</div>

<p>See <a href="#code-1">A1</a> for the code to generate these plots.</p>

<p>As seen on the chart of McDonald’s stock price, it is impossible to conduct a statistical analysis with this due to the non-stationarity. The substantial similarity simple return and log return charts exhibit is linked with the fact that the simple return metric is an approximation for  log return by a first-order Talyor expansion.</p>

<p>The first order Taylor Expansion of $log(x)$ around $x=1$ is as follows.</p>

\[\begin{align}
log(x)
&amp;\simeq log(1)+log^{'}(1)(x-1)\\
&amp;\simeq 0+\dfrac{1}{1}(x-1)
\end{align} \tag{4}\]

<p>So when $\dfrac{P_{t}}{P_{t-1}}\simeq 1$</p>

\[\begin{align}
r_{t}=log \left(\dfrac{P_{t}}{P_{t-1}}\right)
&amp;\simeq \dfrac{P_{t}}{P_{t-1}}-1\\
&amp;\simeq \dfrac{P_{t}-P_{t-1}}{P_{t-1}}=R_{t}
\end{align} \tag{5}\]

<p>When $R_{t}$ is small enough, the difference between simple return and log return is negligible. Log return, however, is often chosen over simple return at least for two practical reasons.</p>

<p>First, log returns are additive, which makes it simpler to calculate the total return of an investment over time. Let $r_{k,\ t}$ denote log return over k-th period at time $t$</p>

\[\begin{align}
r_{k,\ t}
&amp;=log \left(\dfrac{P_{t}}{P_{t-k}}\right)\\
&amp;=log \left(\dfrac{P_{t}}{P_{t-1}}\right)+log \left(\dfrac{P_{t}}{P_{t-2}}\right)+\ ...\ +log \left(\dfrac{P_{t}}{P_{t-k}}\right)\\
&amp;=r_{1,\ t}+r_{1,\ t-1}+\ ...\ +r_{1,\ t-k}\\
&amp;=r_{t}+r_{t-1}+\ ...\ +r_{t-k}
\end{align} \tag{6}\]

<p>Second, simple returns are inherently asymmetric due to the limited liability issue (simple returns are bounded by -100%) and positive skewness, and logarithmic transformation remedies this problem by mapping the range of $(-1, 0)$ to the range of $(-\infty, 0)$ and limiting big positive values.</p>

<p>To summarize, log returns are often preferred in the statistical analysis of financial assets due to their suitability for comparison, symmetric nature, and ease of calculation for different time horizons. So, we are going to determine the distribution of the log returns of McDonald’s stock for calculating Value at Risk (VaR).</p>

<h2 id="value-at-risk-var">Value at Risk (VaR)</h2>
<p>Maybe VaR could be eariler than Price, return, log return part to definte what that is and why it needs some distribution earlier and then naturally “whose distribution?”</p>

<p>Cool!</p>

<p>add equations and Let’s say the company is mcdonald and  change the title more attractive to general public (for example how much can we expect to lose from investment in mcdonald stock)</p>

<h2 id="appendix">Appendix</h2>

<p><a id="code-1"></a></p>
<h3 id="a1-prices-simple-returns-and-log-returns">A1: Prices, simple returns and log returns</h3>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">

</span><span class="n">autoplot</span><span class="p">(</span><span class="n">MCD_perform</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"Year"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_x_date</span><span class="p">(</span><span class="n">date_breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1 year"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">facet_grid</span><span class="p">(</span><span class="n">Series</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">.</span><span class="p">,</span><span class="w"> </span><span class="n">scales</span><span class="o">=</span><span class="s2">"free_y"</span><span class="p">,</span><span class="w">
             </span><span class="n">switch</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span><span class="w">

  </span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">strip.background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="n">panel.background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="n">panel.grid.major</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">element_line</span><span class="p">(</span><span class="n">colour</span><span class="o">=</span><span class="s2">"#E7E7E7"</span><span class="p">),</span><span class="w">
        </span><span class="n">panel.grid.minor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_line</span><span class="p">(</span><span class="n">colour</span><span class="o">=</span><span class="s2">"#E7E7E7"</span><span class="p">),</span><span class="w">
        </span><span class="n">axis.line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_line</span><span class="p">(</span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">),</span><span class="w">
        </span><span class="n">strip.placement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"outside"</span><span class="p">,</span><span class="w">
        </span><span class="n">strip.text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">14</span><span class="p">),</span><span class="w">
        </span><span class="n">axis.title.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">14</span><span class="p">),</span><span class="w">
        </span><span class="n">axis.text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="m">14</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_line</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"#1F77B4"</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="o">=</span><span class="m">0.5</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
:ET